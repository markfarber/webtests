<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="./css/style.css" />
    <style>
      #alert,#loading{
        display: none;
      }
      .loading{
        position: fixed;
        top: 47%;
        left: 47%;
        z-index: 100;
      }
      .gradient-custom-2 {
        /* fallback for old browsers */
        background: #90fcf8;

        /* Chrome 10-25, Safari 5.1-6 */
        background: -webkit-linear-gradient(to right, #24abee, #3664d8, #6336dd, #8945b4);

        /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
        background: linear-gradient(to right,  #24abee, #3664d8, #6336dd, #8945b4);
      }

      @media (min-width: 768px) {
        .gradient-form {
        height: 100vh !important;
        }
        }
        @media (min-width: 769px) {
        .gradient-custom-2 {
        border-top-right-radius: .3rem;
        border-bottom-right-radius: .3rem;
        }
      }
      
    </style>
    <title>Document</title>
  </head>
  <body>

    <section class="h-100 gradient-form" >
      <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-xl-10">
            <div class="card rounded-3 text-black">
              <div class="row g-0">
                <!-- login form side -->
                <div class="col-lg-6">
                  <div class="card-body p-md-5 mx-md-4">
    
                    <div class="text-center">
                      <img src="https://storage.googleapis.com/tyg-stage-b8e16.appspot.com/static/logo.png"
                        style="width: 185px;" alt="logo">
                      <h4 class="mt-1 mb-5 pb-1" >שירות מסרים יומי עם ישי גד</h4>
                    </div>
    
                    <form>
    
                      <div class="form-outline mb-4">
                        <input type="email" id="email" class="form-control rtl"
                          placeholder="user@google.com" />
                        <label class="form-label" for="email"  >כתובת דואר אלקתרוני</label>
                      </div>
    
                      <div class="form-outline mb-4">
                        <input dir="ltr" type="password" id="password" class="form-control" />
                        <label dir="ltr" class="form-label" for="password">סיסמה</label>
                      </div>
    
                      <div class="text-center pt-1 mb-5 pb-1">
                        <button id="singin" dir="ltr" class="btn btn-primary btn-block fa-lg gradient-custom-2 mb-3" type="button">התחבר/י</button>
                        <a class="text-muted" href="./restorPass.html">שחככת את הססמה?</a>
                      </div>
                      <!-- alert -->
                      <div id="alert" class="alert alert-danger alert-dismissible fade show">
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        <strong>הפרתים שהוזנו אינם נכונים או שאינם במערכת<br>אם הנך משתמש רשום<br> נסה לשחזר את הססמה או הרשם</strong>
                      </div>

                      <div class="d-flex align-items-center justify-content-center pb-4">
                        <p class="mb-0 me-2">עדין לא נרשמתם?</p>
                        <button type="button" class="btn btn-outline-info">הרשמה</button>
                      </div>
    
                    </form>
    
                  </div>
                </div>
                <!-- loading -->
                <div class="d-flex justify-content-center loading">
                  <div   class="spinner-border text-info " id="loading" role="status">
                    <span class="sr-only"></span>
                  </div>
                </div>
                <!-- video side -->
                <div class="col-lg-6 d-flex align-items-center gradient-custom-2">
                  <div class="text-white px-3 py-4 p-md-5 mx-md-4">
                    <div class="embed-responsive embed-responsive-16by9">
                      <!-- Replace 'YOUR_YOUTUBE_EMBED_URL' with the actual embed URL of your YouTube video -->
                      <iframe class="embed-responsive-item"  width="100%" height="300px" src="https://www.youtube.com/embed/22yNgmLLuj0?si=W2lyhImjbTkkbNko&amp;controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
                    <h4 class="mb-4">We are more than just a company</h4>
                    <p class="small mb-0">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                      exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


    
      
   
















    <!-- <section class="vh-100  pb-3">
      <div class="container py-5 h-100">
        <div class="row d-flex align-items-center justify-content-center h-100">
          <div class="col-md-8 col-lg-7 col-xl-6 mb-4">
            <img src="https://storage.googleapis.com/tyg-stage-b8e16.appspot.com/static/logo.png" class="img-fluid" alt="Phone image" />
          </div>
          <div class="col-md-8 col-lg-7 col-xl-12 mb-4">
            <h1 class="display-2 text-center mt-5 ">שירות מסרים יומי עם ישי גד</h1>
          </div>
          <div class="col-md-7 col-lg-12 col-xl-12 offset-xl-12">
            <div>

              Email input
              <div class="form-outline mb-4" dir="rtl">
                <label class="form-label" for="email">כתובת דואר אלקתרוני</label>
                <input type="email" id="email" class="form-control form-control-lg" dir="ltr" />
              </div>

              Password input
              <div class="form-outline mb-4" dir="rtl">
                <label class="form-label" for="password">סיסמה</label>
                <input type="password" id="password" class="form-control form-control-lg" />
              </div>

              <div class="d-flex justify-content-around align-items-center mb-4" dir="rtl">
                Checkbox
                <div class="form-check" dir="rtl">
                  <input class="form-check-input" type="checkbox" value="" id="Remember" checked />
                  <label class="form-check-label" for="form1Example3"> התחברות אותומתית </label>
                </div>

                 loading modal
              <div class="d-flex justify-content-center">
                <div   class="spinner-border text-info " id="loading" role="status">
                  <span class="sr-only"></span>
                </div>
              </div>

                <a href="./restorPass.html">לחץ לשחזור סיסמה</a>
              </div>

              Error Alert
              <div id="alert" class="alert alert-danger alert-dismissible fade show">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <strong>הפרתים שהוזנו אינם נכונים או שאינם במערכת<br>אם הנך משתמש רשום<br> נסה לשחזר את הססמה או הרשם</strong>
              </div>

             

              Submit button
              <div class="row mb-3">

                <div class="col-sm mx-1">
                  <a href="singUp.html" class="col-sm btn btn-primary btn-lg btn-block fbtn ">הרשם/י</a>
              </div>

                <div class="col-sm mx-1">
                  <a id="singin" class="col-sm btn btn-primary btn-lg btn-block fbtn ">התחבר/י</a>
              </div>
             
              </div>
             </div>
          </div>
        </div>
      </div>
    </section> -->

    <!-- end log in -->

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-functions-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js"></script>
    <script src="js/main.js"></script>

    <script>
      
      //email & password singin
      signInBtn = document.getElementById("singin");
      signInBtn.onclick = () => {
        document.getElementById("loading").style.display = "block"

        firebase.auth().signInWithEmailAndPassword(document.getElementById("email").value, document.getElementById("password").value)
          .then((userCredential) => {
            // Signed in successfullyee
            var user = userCredential.user;
            console.log("User signed in:", user);


            getUser()
            

          })
          .catch((error) => {
            var errorCode = error.code;
            var errorMessage = error.message;
            console.log(errorMessage)
            document.getElementById("alert").style.display = "block"
            document.getElementById("loading").style.display = "none"
          });


      }

      function getUser(){
      functions.httpsCallable("user_get")()
            .then((user_obj) => {
              console.log( user_obj);
              localStorage.setItem(USER_KEY, JSON.stringify(user_obj.data));
              window.location.href = "./homePage.html";
            }).catch((e) => {
             // getUser()
              console.error("error " + e);
          });
      }
    </script>
  </body>
</html>
